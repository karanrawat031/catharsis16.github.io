function autoPlay(){var currentDate=$(settings.datesDiv).find("a."+settings.datesSelectedClass);"forward"==settings.autoPlayDirection?currentDate.parent().is("li:last-child")?$(settings.datesDiv+" li:first-child").find("a").trigger("click"):currentDate.parent().next().find("a").trigger("click"):"backward"==settings.autoPlayDirection&&(currentDate.parent().is("li:first-child")?$(settings.datesDiv+" li:last-child").find("a").trigger("click"):currentDate.parent().prev().find("a").trigger("click"))}jQuery.fn.timelinr=function(options){settings=jQuery.extend({orientation:"horizontal",containerDiv:"#timeline",datesDiv:"#dates",datesSelectedClass:"selected",datesSpeed:"normal",issuesDiv:"#issues",issuesSelectedClass:"selected",issuesSpeed:"fast",issuesTransparency:.2,issuesTransparencySpeed:500,prevButton:"#prev",nextButton:"#next",arrowKeys:"false",startAt:1,autoPlay:"false",autoPlayDirection:"forward",autoPlayPause:2e3},options),$(function(){var howManyDates=$(settings.datesDiv+" li").length,howManyIssues=$(settings.issuesDiv+" li").length,widthContainer=($(settings.datesDiv).find("a."+settings.datesSelectedClass),$(settings.issuesDiv).find("li."+settings.issuesSelectedClass),$(settings.containerDiv).width()),heightContainer=$(settings.containerDiv).height(),widthIssue=($(settings.issuesDiv).width(),$(settings.issuesDiv).height(),$(settings.issuesDiv+" li").width()),heightIssue=$(settings.issuesDiv+" li").height(),widthDate=($(settings.datesDiv).width(),$(settings.datesDiv).height(),$(settings.datesDiv+" li").width()),heightDate=$(settings.datesDiv+" li").height();if("horizontal"==settings.orientation){$(settings.issuesDiv).width(widthIssue*howManyIssues),$(settings.datesDiv).width(widthDate*howManyDates).css("marginLeft",widthContainer/2-widthDate/2);var defaultPositionDates=parseInt($(settings.datesDiv).css("marginLeft").substring(0,$(settings.datesDiv).css("marginLeft").indexOf("px")))}else if("vertical"==settings.orientation){$(settings.issuesDiv).height(heightIssue*howManyIssues),$(settings.datesDiv).height(heightDate*howManyDates).css("marginTop",heightContainer/2-heightDate/2);var defaultPositionDates=parseInt($(settings.datesDiv).css("marginTop").substring(0,$(settings.datesDiv).css("marginTop").indexOf("px")))}$(settings.datesDiv+" a").click(function(event){event.preventDefault();var currentIndex=($(this).text(),$(this).parent().prevAll().length);"horizontal"==settings.orientation?$(settings.issuesDiv).animate({marginLeft:-widthIssue*currentIndex},{queue:!1,duration:settings.issuesSpeed}):"vertical"==settings.orientation&&$(settings.issuesDiv).animate({marginTop:-heightIssue*currentIndex},{queue:!1,duration:settings.issuesSpeed}),$(settings.issuesDiv+" li").animate({opacity:settings.issuesTransparency},{queue:!1,duration:settings.issuesSpeed}).removeClass(settings.issuesSelectedClass).eq(currentIndex).addClass(settings.issuesSelectedClass).fadeTo(settings.issuesTransparencySpeed,1),1==howManyDates?$(settings.prevButton+","+settings.nextButton).fadeOut("fast"):2==howManyDates?$(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?($(settings.prevButton).fadeOut("fast"),$(settings.nextButton).fadeIn("fast")):$(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)&&($(settings.nextButton).fadeOut("fast"),$(settings.prevButton).fadeIn("fast")):$(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?($(settings.nextButton).fadeIn("fast"),$(settings.prevButton).fadeOut("fast")):$(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)?($(settings.prevButton).fadeIn("fast"),$(settings.nextButton).fadeOut("fast")):$(settings.nextButton+","+settings.prevButton).fadeIn("slow"),$(settings.datesDiv+" a").removeClass(settings.datesSelectedClass),$(this).addClass(settings.datesSelectedClass),"horizontal"==settings.orientation?$(settings.datesDiv).animate({marginLeft:defaultPositionDates-widthDate*currentIndex},{queue:!1,duration:"settings.datesSpeed"}):"vertical"==settings.orientation&&$(settings.datesDiv).animate({marginTop:defaultPositionDates-heightDate*currentIndex},{queue:!1,duration:"settings.datesSpeed"})}),$(settings.nextButton).bind("click",function(event){if(event.preventDefault(),"horizontal"==settings.orientation){var currentPositionIssues=parseInt($(settings.issuesDiv).css("marginLeft").substring(0,$(settings.issuesDiv).css("marginLeft").indexOf("px"))),currentPositionDates=parseInt($(settings.datesDiv).css("marginLeft").substring(0,$(settings.datesDiv).css("marginLeft").indexOf("px"))),currentIssueDate=currentPositionDates-widthDate;-(widthIssue*howManyIssues-widthIssue)>=currentPositionIssues?($(settings.issuesDiv).stop(),$(settings.datesDiv+" li:last-child a").click()):$(settings.issuesDiv).is(":animated")||($(settings.issuesDiv).animate({marginLeft:currentPositionIssues-widthIssue},{queue:!1,duration:settings.issuesSpeed}),$(settings.issuesDiv+" li").animate({opacity:settings.issuesTransparency},{queue:!1,duration:settings.issuesSpeed}),$(settings.issuesDiv+" li."+settings.issuesSelectedClass).removeClass(settings.issuesSelectedClass).next().fadeTo(settings.issuesTransparencySpeed,1).addClass(settings.issuesSelectedClass),$(settings.datesDiv).animate({marginLeft:currentIssueDate},{queue:!1,duration:"settings.datesSpeed"}),$(settings.datesDiv+" a."+settings.datesSelectedClass).removeClass(settings.datesSelectedClass).parent().next().children().addClass(settings.datesSelectedClass))}else if("vertical"==settings.orientation){var currentPositionIssues=parseInt($(settings.issuesDiv).css("marginTop").substring(0,$(settings.issuesDiv).css("marginTop").indexOf("px"))),currentPositionDates=parseInt($(settings.datesDiv).css("marginTop").substring(0,$(settings.datesDiv).css("marginTop").indexOf("px"))),currentIssueDate=currentPositionDates-heightDate;-(heightIssue*howManyIssues-heightIssue)>=currentPositionIssues?($(settings.issuesDiv).stop(),$(settings.datesDiv+" li:last-child a").click()):$(settings.issuesDiv).is(":animated")||($(settings.issuesDiv).animate({marginTop:currentPositionIssues-heightIssue},{queue:!1,duration:settings.issuesSpeed}),$(settings.issuesDiv+" li").animate({opacity:settings.issuesTransparency},{queue:!1,duration:settings.issuesSpeed}),$(settings.issuesDiv+" li."+settings.issuesSelectedClass).removeClass(settings.issuesSelectedClass).next().fadeTo(settings.issuesTransparencySpeed,1).addClass(settings.issuesSelectedClass),$(settings.datesDiv).animate({marginTop:currentIssueDate},{queue:!1,duration:"settings.datesSpeed"}),$(settings.datesDiv+" a."+settings.datesSelectedClass).removeClass(settings.datesSelectedClass).parent().next().children().addClass(settings.datesSelectedClass))}1==howManyDates?$(settings.prevButton+","+settings.nextButton).fadeOut("fast"):2==howManyDates?$(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?($(settings.prevButton).fadeOut("fast"),$(settings.nextButton).fadeIn("fast")):$(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)&&($(settings.nextButton).fadeOut("fast"),$(settings.prevButton).fadeIn("fast")):$(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?$(settings.prevButton).fadeOut("fast"):$(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)?$(settings.nextButton).fadeOut("fast"):$(settings.nextButton+","+settings.prevButton).fadeIn("slow")}),$(settings.prevButton).click(function(event){if(event.preventDefault(),"horizontal"==settings.orientation){var currentPositionIssues=parseInt($(settings.issuesDiv).css("marginLeft").substring(0,$(settings.issuesDiv).css("marginLeft").indexOf("px"))),currentPositionDates=parseInt($(settings.datesDiv).css("marginLeft").substring(0,$(settings.datesDiv).css("marginLeft").indexOf("px"))),currentIssueDate=currentPositionDates+widthDate;currentPositionIssues>=0?($(settings.issuesDiv).stop(),$(settings.datesDiv+" li:first-child a").click()):$(settings.issuesDiv).is(":animated")||($(settings.issuesDiv).animate({marginLeft:currentPositionIssues+widthIssue},{queue:!1,duration:settings.issuesSpeed}),$(settings.issuesDiv+" li").animate({opacity:settings.issuesTransparency},{queue:!1,duration:settings.issuesSpeed}),$(settings.issuesDiv+" li."+settings.issuesSelectedClass).removeClass(settings.issuesSelectedClass).prev().fadeTo(settings.issuesTransparencySpeed,1).addClass(settings.issuesSelectedClass),$(settings.datesDiv).animate({marginLeft:currentIssueDate},{queue:!1,duration:"settings.datesSpeed"}),$(settings.datesDiv+" a."+settings.datesSelectedClass).removeClass(settings.datesSelectedClass).parent().prev().children().addClass(settings.datesSelectedClass))}else if("vertical"==settings.orientation){var currentPositionIssues=parseInt($(settings.issuesDiv).css("marginTop").substring(0,$(settings.issuesDiv).css("marginTop").indexOf("px"))),currentPositionDates=parseInt($(settings.datesDiv).css("marginTop").substring(0,$(settings.datesDiv).css("marginTop").indexOf("px"))),currentIssueDate=currentPositionDates+heightDate;currentPositionIssues>=0?($(settings.issuesDiv).stop(),$(settings.datesDiv+" li:first-child a").click()):$(settings.issuesDiv).is(":animated")||($(settings.issuesDiv).animate({marginTop:currentPositionIssues+heightIssue},{queue:!1,duration:settings.issuesSpeed}),$(settings.issuesDiv+" li").animate({opacity:settings.issuesTransparency},{queue:!1,duration:settings.issuesSpeed}),$(settings.issuesDiv+" li."+settings.issuesSelectedClass).removeClass(settings.issuesSelectedClass).prev().fadeTo(settings.issuesTransparencySpeed,1).addClass(settings.issuesSelectedClass),$(settings.datesDiv).animate({marginTop:currentIssueDate},{queue:!1,duration:"settings.datesSpeed"},{queue:!1,duration:settings.issuesSpeed}),$(settings.datesDiv+" a."+settings.datesSelectedClass).removeClass(settings.datesSelectedClass).parent().prev().children().addClass(settings.datesSelectedClass))}1==howManyDates?$(settings.prevButton+","+settings.nextButton).fadeOut("fast"):2==howManyDates?$(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?($(settings.prevButton).fadeOut("fast"),$(settings.nextButton).fadeIn("fast")):$(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)&&($(settings.nextButton).fadeOut("fast"),$(settings.prevButton).fadeIn("fast")):$(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?$(settings.prevButton).fadeOut("fast"):$(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)?$(settings.nextButton).fadeOut("fast"):$(settings.nextButton+","+settings.prevButton).fadeIn("slow")}),"true"==settings.arrowKeys&&("horizontal"==settings.orientation?$(document).keydown(function(event){39==event.keyCode&&$(settings.nextButton).click(),37==event.keyCode&&$(settings.prevButton).click()}):"vertical"==settings.orientation&&$(document).keydown(function(event){40==event.keyCode&&$(settings.nextButton).click(),38==event.keyCode&&$(settings.prevButton).click()})),$(settings.datesDiv+" li").eq(settings.startAt-1).find("a").trigger("click"),"true"==settings.autoPlay&&setInterval("autoPlay()",settings.autoPlayPause)})};